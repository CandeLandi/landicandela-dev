<div class="space-y-8">

  @if (images.length > 0) {
    <div class="bg-gray-900/30 backdrop-blur-sm border border-gray-800/50 rounded-2xl overflow-hidden">
      <div class="p-6 border-b border-gray-800/50">
        <h3 class="text-lg font-semibold text-white mb-2">Main Gallery</h3>
        <p class="text-gray-400">Featured image and complete gallery</p>
      </div>

      <div class="p-6">

        <div class="relative aspect-video bg-gray-900/50 rounded-xl overflow-hidden mb-6">
          <img
            [src]="images[currentImageIndex()] || '/assets/placeholder.svg'"
            [alt]="`Image ${currentImageIndex() + 1}`"
            class="w-full h-full object-cover"
          />

          @if (images.length > 1) {
            <button
              (click)="previousImage()"
              class="absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white rounded-full p-3 transition-colors"
            >
              <i-lucide name="ArrowLeft" class="w-5 h-5"></i-lucide>
            </button>
            <button
              (click)="nextImage()"
              class="absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white rounded-full p-3 transition-colors"
            >
              <i-lucide name="ArrowRight" class="w-5 h-5"></i-lucide>
            </button>
          }

          <div class="absolute top-4 right-4 bg-black/70 text-white text-sm px-3 py-1 rounded-full">
            {{ currentImageIndex() + 1 }} / {{ images.length }}
          </div>

          <button
            (click)="removeImage(currentImageIndex())"
            class="absolute top-4 left-4 bg-red-500/80 hover:bg-red-500 text-white rounded-full p-2 transition-colors"
          >
            <i-lucide name="Trash2" class="w-4 h-4"></i-lucide>
          </button>
        </div>

        <div class="grid grid-cols-6 md:grid-cols-8 lg:grid-cols-10 gap-3">
          @for (image of images; track $index) {
            <button
              (click)="setCurrentImage($index)"
              class="aspect-square rounded-lg overflow-hidden border-2 transition-all"
              [class]="$index === currentImageIndex()
                ? 'border-purple-400 opacity-100 scale-105'
                : 'border-gray-700 opacity-60 hover:opacity-80'"
            >
              <img
                [src]="image || '/assets/placeholder.svg'"
                [alt]="`Thumbnail ${$index + 1}`"
                class="w-full h-full object-cover"
              />
            </button>
          }
        </div>
      </div>
    </div>
  }

  <div class="bg-gray-900/30 backdrop-blur-sm border border-gray-800/50 rounded-2xl p-6">
    <h3 class="text-lg font-semibold text-white mb-4">Upload New Images</h3>

    <input
      type="file"
      multiple
      accept="image/*"
      (change)="onFileSelected($event)"
      class="hidden"
      id="image-upload"
      [disabled]="uploading()"
    />

    <label
      for="image-upload"
      class="group cursor-pointer block w-full border-2 border-dashed border-gray-700 hover:border-purple-400/50 rounded-xl p-12 text-center transition-all duration-300"
      (dragover)="onDragOver($event)"
      (drop)="onDrop($event)"
    >
      <div class="flex flex-col items-center gap-4">
        <div class="p-6 bg-gray-800/50 group-hover:bg-purple-600/20 rounded-full transition-colors">
          @if (uploading()) {
            <i-lucide name="RefreshCw" class="w-10 h-10 text-purple-400 animate-spin"></i-lucide>
          } @else {
            <i-lucide name="Upload" class="w-10 h-10 text-gray-400 group-hover:text-purple-400"></i-lucide>
          }
        </div>
        <div>
          <p class="text-xl text-gray-300 group-hover:text-white transition-colors">
            @if (uploading()) {
              Uploading images...
            } @else {
              Drag images here or click to select
            }
          </p>
          <p class="text-sm text-gray-500 mt-2">PNG, JPG, WEBP up to 5MB each</p>
        </div>
      </div>
    </label>
  </div>
</div>
