<aside class="hidden lg:fixed lg:inset-y-0 lg:left-0 lg:z-50 lg:block lg:w-20 xl:w-24">
  <div class="flex h-full flex-col">
    <nav class="flex-1 px-3 xl:px-4 py-8">
      <ul class="space-y-4">
        @for (item of menuItems; track item.id) {
          <li>
            <button
              (click)="scrollToSection(item.id)"
              [class]="'group relative w-full flex items-center justify-center p-3 xl:p-4 rounded-xl transition-all duration-300 ' +
                (activeSection === item.id
                  ? 'bg-gradient-to-r from-purple-600/20 to-purple-500/20 text-purple-400 shadow-lg shadow-purple-500/20'
                  : 'text-gray-400 hover:text-white hover:bg-gray-800/50')"
              [title]="item.label"
            >
              <i-lucide [name]="item.icon" class="w-5 h-5 xl:w-6 xl:h-6"></i-lucide>

              @if (activeSection === item.id) {
                <div class="absolute -right-3 top-1/2 -translate-y-1/2 w-1 h-8 bg-gradient-to-b from-purple-400 to-purple-600 rounded-full"></div>
              }

              <div class="absolute left-full ml-4 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-50 border border-gray-700">
                {{ item.label }}
                <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-1 w-2 h-2 bg-gray-900 rotate-45 border-l border-b border-gray-700"></div>
              </div>
            </button>
          </li>
        }
      </ul>
    </nav>

    <div class="px-3 xl:px-4 pb-8">
      <div class="space-y-3">
        <a
          href="https://github.com/candelandi"
          class="group flex items-center justify-center p-2.5 xl:p-3 text-gray-400 hover:text-white hover:bg-gray-800/50 rounded-lg transition-all duration-300"
          title="GitHub"
          target="_blank"
          rel="noopener noreferrer"
        >
          <i-lucide name="github" class="w-4 h-4 xl:w-5 xl:h-5"></i-lucide>
        </a>
        <a
          href="https://www.linkedin.com/in/candela-landi-5651002ab"
          class="group flex items-center justify-center p-2.5 xl:p-3 text-gray-400 hover:text-blue-400 hover:bg-gray-800/50 rounded-lg transition-all duration-300"
          title="LinkedIn"
          target="_blank"
          rel="noopener noreferrer"
        >
          <i-lucide name="linkedin" class="w-4 h-4 xl:w-5 xl:h-5"></i-lucide>
        </a>
      </div>
    </div>
  </div>
</aside>

<header class="lg:hidden fixed top-3 right-3 z-50">
  <div class="relative">
    <div class="flex justify-end items-center">
      <button
        (click)="toggleMobileMenu()"
        class="text-gray-400 hover:text-white p-2 rounded-xl bg-black/40 border border-gray-800/60 backdrop-blur-md w-14 h-14 flex items-center justify-center"
        aria-label="Toggle menu"
      >
        @if (!isMobileMenuOpen) {
          <i-lucide name="menu" class="w-6 h-6"></i-lucide>
        }
        @if (isMobileMenuOpen) {
          <i-lucide name="x" class="w-6 h-6"></i-lucide>
        }
      </button>
    </div>
  </div>

  @if (isMobileMenuOpen) {
    <!-- Mini sidemenu panel anchored to the button; no full-width bar -->
    <div class="absolute right-0 top-16">
      <nav class="flex flex-col gap-3 p-2 bg-black/40 backdrop-blur-md border border-gray-800/60 rounded-2xl w-14">
        @for (item of menuItems; track item.id) {
          <button
            (click)="scrollToSection(item.id)"
            [class]="'relative w-10 h-10 flex items-center justify-center rounded-xl transition-all ' +
              (activeSection === item.id ? 'bg-purple-600/20 text-purple-400 shadow-lg shadow-purple-500/20' : 'text-gray-400 hover:text-white hover:bg-gray-800/50')"
            [title]="item.label"
          >
            <i-lucide [name]="item.icon" class="w-5 h-5"></i-lucide>
            @if (activeSection === item.id) {
              <div class="absolute -right-1 top-1/2 -translate-y-1/2 w-1 h-6 bg-gradient-to-b from-purple-400 to-purple-600 rounded-full"></div>
            }
          </button>
        }
      </nav>
    </div>
  }
</header>
